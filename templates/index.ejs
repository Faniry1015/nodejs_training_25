<%- include('./shared/header.ejs', { title: 'Apprendre Fastify shared' }) %>
<h1 class="text-3xl font-bold text-gray-800 my-5">
  <%= pageTitle || 'Titre par défaut' %>
</h1>
<% if (locals.user === undefined) { %>
    <div class="w-[fit-content] bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700 m-6 fit-content">
      <a href="/login">Connexion</a>
    </div>
<% } %>

<% if (locals.user) { %>
<h2>Bonjour <%- locals.user %>     <div class="w-[fit-content] bg-red-500 text-white font-bold py-2 px-4 rounded hover:bg-red-700 m-6 fit-content">
  <form action="/logout" method="POST">
  <button type="submit">Déconnexion</button>
  </form>
</div></h2>

<form
  action=""
  method="post"
  class="max-w-3xl mx-auto bg-white shadow-md rounded-lg p-6 space-y-4 my-5"
>
  <div>
    <label for="title" class="block text-gray-700 font-medium mb-2"
      >Titre</label
    >
    <input
      type="text"
      name="title"
      id="title"
      class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 p-2"
      placeholder="Saisissez le titre"
    />
  </div>
  <div>
    <label for="content" class="block text-gray-700 font-medium mb-2"
      >Contenu</label
    >
    <textarea
      name="content"
      id="content"
      rows="4"
      class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 p-2"
      placeholder="Saisissez le contenu ici"
    ></textarea>
  </div>
  <div>
    <button
      type="submit"
      class="w-full bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-600"
    >
      Envoyer
    </button>
  </div>
</form>
<% } %> <% if (locals.posts && posts.length > 0) { %>
<div class="grid grid-cols-3 gap-3">
  <% for (const post of posts) { %> <%- include('./post.ejs', { post }) %> <% }
  %>
</div>
<% } else { %>
<p>Aucun post disponible.</p>
<% } %> <%- include('./shared/footer.ejs') %>
